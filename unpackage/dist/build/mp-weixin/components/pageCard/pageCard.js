(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/pageCard/pageCard"],{3276:function(t,e,n){"use strict";n.r(e);var a=n("b352"),o=n.n(a);for(var i in a)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(i);e["default"]=o.a},"45d2":function(t,e,n){"use strict";var a=n("77ab"),o=n.n(a);o.a},"5a8c":function(t,e,n){"use strict";n.r(e);var a=n("aca2"),o=n("3276");for(var i in o)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(i);n("45d2");var s=n("f0c5"),u=Object(s["a"])(o["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],void 0);e["default"]=u.exports},"77ab":function(t,e,n){},aca2:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return a}));var a={uToast:function(){return n.e("uni_modules/uview-ui/components/u-toast/u-toast").then(n.bind(null,"267c"))},uModal:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-modal/u-modal")]).then(n.bind(null,"3042"))},uAvatar:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-avatar/u-avatar")]).then(n.bind(null,"9706"))},uButton:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-button/u-button")]).then(n.bind(null,"872b"))}},o=function(){var t=this.$createElement;this._self._c},i=[]},b352:function(t,e,n){"use strict";(function(t){var a=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a(n("66fd")),i={name:"pageCard",props:{propUserHeadImgSrc:{type:String,default:""},propPageTime:{type:String,default:"2023/4/15"},imgBaseUrl:{type:String},propImgUrl:{type:Array},content:{type:String},title:{type:String},deletshow:{type:Boolean,default:!1},userCard:{type:Boolean,default:!1},collectCard:{type:Boolean,default:!1},propData:{type:Object,default:function(){return{id:null,user_id:null,create_time:"2023-4-20",title:"标题",content:"这里是内容",image:null}}}},data:function(){return{collectCard:!1,isStar:!1,$imgBaseUrl:o.default.prototype.$imgBaseUrl,isLike:null,likeCount:null,userAvatar:null,userName:null,commentNum:null,currentUserID:null,modalShow:!1,isDelete:!0}},methods:{addCollect:function(){var e=this;t.$u.http.post("/bbs/addCollect",{post_id:"".concat(this.propData.id),user_id:"".concat(this.currentUserID)}).then((function(t){e.isStar=!e.isStar})).catch((function(t){console.log(t)}))},cancelCollect:function(){var e=this;t.$u.http.post("/bbs/cancelCollect",{post_id:"".concat(this.propData.id),user_id:"".concat(this.currentUserID)}).then((function(t){e.isStar=!e.isStar})).catch((function(t){console.log(t)}))},getCollectState:function(){var e=this;t.$u.http.get("/bbs/getCollectState",{params:{user_id:"".concat(this.currentUserID),post_id:"".concat(this.propData.id)}}).then((function(t){e.isStar=t.data})).catch((function(t){console.log(t)}))},isFocus:function(){this.isStar?this.cancelCollect():this.addCollect()},toDeletePost:function(){var e=this;console.log(111),t.$u.http.post("/bbs/deletePost",{post_id:"".concat(this.propData.id),user_id:"".concat(this.propData.user_id)}).then((function(t){console.log("删除成功",t),e.modalShow=!1,e.$refs.uToast.show({type:"success",message:"删除成功",duration:800}),e.isDelete=!1})).catch((function(t){console.log(t)}))},deletPost:function(){this.modalShow=!0},hiddenModal:function(){this.modalShow=!1},getCommmentNum:function(){var e=this;t.$u.http.get("/bbs/getCommentCountByPostID",{params:{post_id:"".concat(this.propData.id)}}).then((function(t){e.commentNum=t.data[0].commentNum})).catch((function(t){console.log(t)}))},addVisitCount:function(){t.$u.http.get("/bbs/addVisitCount",{params:{post_id:"".concat(this.propData.id)}}).then((function(t){}))},getPostAuthor:function(){var e=this,n=this.propData.user_id;t.$u.http.get("/users/getIDTargetUser",{params:{user_id:"".concat(n)}}).then((function(t){var n=t.data.data[0];e.userAvatar=n.icon,n.nickname?e.userName=n.nickname:e.userName="用户".concat(n.user_id)}))},getLikesNum:function(){var e=this,n=this.propData.id;t.$u.http.get("/bbs/getLikesNum",{params:{post_id:"".concat(n)}}).then((function(t){e.likeCount=t.data.data[0].likesNum})),this.currentUserID=t.getStorageSync("user_id");var a=this.currentUserID;t.$u.http.get("/bbs/getIsLikes",{params:{post_id:"".concat(n),user_id:"".concat(a)}}).then((function(t){e.isLike=t.data}))},changeLikeStatus:function(){var e=this,n=this.propData.id;this.isLike?t.$u.http.get("/bbs/delLikes",{params:{post_id:"".concat(n),user_id:"".concat(this.currentUserID)}}).then((function(a){t.$u.http.get("/bbs/getLikesNum",{params:{post_id:"".concat(n)}}).then((function(t){e.likeCount=t.data.data[0].likesNum}))})):t.$u.http.get("/bbs/addLikes",{params:{post_id:"".concat(n),user_id:"".concat(this.currentUserID)}}).then((function(a){t.$u.http.get("/bbs/getLikesNum",{params:{post_id:"".concat(n)}}).then((function(t){e.likeCount=t.data.data[0].likesNum}))})),this.isLike=!this.isLike},toPageDetil:function(){var e=this.propData.id;this.addVisitCount(),t.navigateTo({url:"/pages/bbs/pageDetail/pageDetail?postID=".concat(e)})},toUserDetail:function(){t.navigateTo({url:"/pages/bbs/userDetail/userDetail?userID=".concat(this.propData.user_id)})}},mounted:function(){this.getPostAuthor(),this.getLikesNum(),this.getCommmentNum(),this.getCollectState()}};e.default=i}).call(this,n("543d")["default"])}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/pageCard/pageCard-create-component',
    {
        'components/pageCard/pageCard-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("5a8c"))
        })
    },
    [['components/pageCard/pageCard-create-component']]
]);
