(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/bbs/bbs"],{315:function(t,e,n){"use strict";(function(t,e){var o=n(4);n(26);o(n(25));var a=o(n(316));t.__webpack_require_UNI_MP_PLUGIN__=n,e(a.default)}).call(this,n(1)["default"],n(2)["createPage"])},316:function(t,e,n){"use strict";n.r(e);var o=n(317),a=n(319);for(var i in a)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(i);n(321);var r,u=n(32),s=Object(u["default"])(a["default"],o["render"],o["staticRenderFns"],!1,null,null,null,!1,o["components"],r);s.options.__file="pages/bbs/bbs.vue",e["default"]=s.exports},317:function(t,e,n){"use strict";n.r(e);var o=n(318);n.d(e,"render",(function(){return o["render"]})),n.d(e,"staticRenderFns",(function(){return o["staticRenderFns"]})),n.d(e,"recyclableRender",(function(){return o["recyclableRender"]})),n.d(e,"components",(function(){return o["components"]}))},318:function(t,e,n){"use strict";var o;n.r(e),n.d(e,"render",(function(){return a})),n.d(e,"staticRenderFns",(function(){return r})),n.d(e,"recyclableRender",(function(){return i})),n.d(e,"components",(function(){return o}));try{o={uModal:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-modal/u-modal")]).then(n.bind(null,1042))},uSearch:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-search/u-search")]).then(n.bind(null,1050))},uSwiper:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-swiper/u-swiper")]).then(n.bind(null,1058))},uNoticeBar:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-notice-bar/u-notice-bar")]).then(n.bind(null,1066))},blockClassify:function(){return n.e("components/blockClassify/blockClassify").then(n.bind(null,1074))},uDivider:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-divider/u-divider")]).then(n.bind(null,972))},pageCard:function(){return n.e("components/pageCard/pageCard").then(n.bind(null,1081))}}}catch(u){if(-1===u.message.indexOf("Cannot find module")||-1===u.message.indexOf(".vue"))throw u;console.error(u.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var a=function(){var t=this,e=t.$createElement;t._self._c},i=!1,r=[];a._withStripped=!0},319:function(t,e,n){"use strict";n.r(e);var o=n(320),a=n.n(o);for(var i in o)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(i);e["default"]=a.a},320:function(t,e,n){"use strict";(function(t){var o=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=o(n(55)),i=o(n(57)),r={data:function(){return{text1:null,noticeID:null,pageData:[],modalShow:!1,isActive:!1,modalTitle:"提示",modalContent:"要去发送新帖子吗？",list3:[],blockData:null,userState:null}},methods:{toNoticeDeatil:function(){t.navigateTo({url:"/pages/message/notice/noticedetail/noticedetail?id=".concat(this.noticeID)})},getTopNotice:function(){var e=this;t.$u.http.get("/msg/getTopNotice").then((function(t){console.log(t.data[0]),e.text1=t.data[0].title,e.noticeID=t.data[0].id}))},getUserData:function(){var e=this,n=t.getStorageSync("user_id");t.$u.http.get("/users/getIDTargetUser",{params:{user_id:n}}).then((function(t){e.userState=t.data.data[0].is_banned}))},getHotBlock:function(){var e=this;t.$u.http.get("/bbs/getHotBlock").then((function(n){var o=n.data;e.blockData=o.map((function(t){return{id:t.id,name:t.name}})),t.$u.http.get("/bbs/getBlockPostNum").then((function(t){var n=t.data;e.blockData.forEach((function(t){var e=n.find((function(e){return e.category_id===t.id}));t.num=e?e.post_num:0})),e.$forceUpdate()}))}))},getSwiperData:function(){var e=this;t.$u.http.get("bbs/getWonderfulPost").then((function(t){var n=t.data.data,o=n.map((function(t){return{id:t.id,image:t.image[0],title:t.title}}));e.list3=o}))},toSearch:function(){t.navigateTo({url:"/pages/bbs/search/search"})},toPageDetail:function(e){var n=this.list3[e].id;t.navigateTo({url:"/pages/bbs/pageDetail/pageDetail?postID=".concat(n)})},toBlockClassifyDetail:function(){t.navigateTo({url:"/pages/bbs/bolckClassifyDetail/bolckClassifyDetail"})},showModal:function(){this.modalShow=!0,this.isActive=!0},hiddenModal:function(){this.modalShow=!1,this.isActive=!1},toSendPost:function(){var e=this;return(0,i.default)(a.default.mark((function n(){return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.showLoading({title:"加载中"}),n.next=3,e.getUserData();case 3:0===e.userState?(t.navigateTo({url:"/pages/bbs/sendPost/sendPost"}),t.hideLoading()):(t.hideLoading(),t.showModal({title:"提示",content:"该用户已被封禁，无法发言，请联系管理员",showCancel:!1}),e.modalShow=!1,e.isActive=!1);case 4:case"end":return n.stop()}}),n)})))()},getPageData:function(){var e=this;t.$u.http.get("/bbs/getHotPosts").then((function(t){var n=t.data.data;e.pageData=n}))}},onShow:function(){this.getPageData();var e=t.getStorageSync("isLogin");e||t.reLaunch({url:"/pages/user/login/login"})},onLoad:function(){this.getSwiperData(),this.getUserData(),this.getPageData(),this.getHotBlock(),this.getTopNotice(),t.showLoading({title:"加载中"})},onReady:function(){t.hideLoading()}};e.default=r}).call(this,n(2)["default"])},321:function(t,e,n){"use strict";n.r(e);var o=n(322),a=n.n(o);for(var i in o)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(i);e["default"]=a.a},322:function(t,e,n){}},[[315,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/bbs/bbs.js.map