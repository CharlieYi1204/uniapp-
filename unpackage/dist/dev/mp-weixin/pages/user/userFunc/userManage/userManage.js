(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/userFunc/userManage/userManage"],{307:function(e,n,t){"use strict";(function(e,n){var o=t(4);t(26);o(t(25));var u=o(t(308));e.__webpack_require_UNI_MP_PLUGIN__=t,n(u.default)}).call(this,t(1)["default"],t(2)["createPage"])},308:function(e,n,t){"use strict";t.r(n);var o=t(309),u=t(311);for(var i in u)["default"].indexOf(i)<0&&function(e){t.d(n,e,(function(){return u[e]}))}(i);t(313);var r,s=t(32),a=Object(s["default"])(u["default"],o["render"],o["staticRenderFns"],!1,null,null,null,!1,o["components"],r);a.options.__file="pages/user/userFunc/userManage/userManage.vue",n["default"]=a.exports},309:function(e,n,t){"use strict";t.r(n);var o=t(310);t.d(n,"render",(function(){return o["render"]})),t.d(n,"staticRenderFns",(function(){return o["staticRenderFns"]})),t.d(n,"recyclableRender",(function(){return o["recyclableRender"]})),t.d(n,"components",(function(){return o["components"]}))},310:function(e,n,t){"use strict";var o;t.r(n),t.d(n,"render",(function(){return u})),t.d(n,"staticRenderFns",(function(){return r})),t.d(n,"recyclableRender",(function(){return i})),t.d(n,"components",(function(){return o}));try{o={uToast:function(){return t.e("uni_modules/uview-ui/components/u-toast/u-toast").then(t.bind(null,948))},uAvatar:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u-avatar/u-avatar")]).then(t.bind(null,955))},uIcon:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u-icon/u-icon")]).then(t.bind(null,963))},uDivider:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u-divider/u-divider")]).then(t.bind(null,972))},uButton:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u-button/u-button")]).then(t.bind(null,980))},"u-Form":function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u--form/u--form")]).then(t.bind(null,990))},uFormItem:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u-form-item/u-form-item")]).then(t.bind(null,996))},"u-Input":function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u--input/u--input")]).then(t.bind(null,1004))},"u-Textarea":function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u--textarea/u--textarea")]).then(t.bind(null,1010))},uniFilePicker:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uni-file-picker/components/uni-file-picker/uni-file-picker")]).then(t.bind(null,1016))},uActionSheet:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u-action-sheet/u-action-sheet")]).then(t.bind(null,1034))}}}catch(s){if(-1===s.message.indexOf("Cannot find module")||-1===s.message.indexOf(".vue"))throw s;console.error(s.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var u=function(){var e=this,n=e.$createElement;e._self._c;e._isMounted||(e.e0=function(e){this.formShow=!0},e.e1=function(n){e.showSex=!0,e.hideKeyboard()},e.e2=function(n){e.showSex=!1})},i=!1,r=[];u._withStripped=!0},311:function(e,n,t){"use strict";t.r(n);var o=t(312),u=t.n(o);for(var i in o)["default"].indexOf(i)<0&&function(e){t.d(n,e,(function(){return o[e]}))}(i);n["default"]=u.a},312:function(e,n,t){"use strict";(function(e){var o=t(4);Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var u=o(t(55)),i=o(t(57)),r={data:function(){return{imageValue:null,imagePostURL:null,formShow:!1,userID:null,model1:{userInfo:{user_id:null,username:null,nickname:null,signature:"",gender:null,icon:null}},icon:null,userData:{},showSex:!1,genderArr:[{name:"男"},{name:"女"},{name:"保密"}]}},methods:{deleteImg:function(){console.log(111),this.imagePostURL=null,console.log(this.imagePostURL)},uploadImg:function(){var n=this;return console.log(222),new Promise((function(t){e.uploadFile({url:"http://localhost:3000/upload/upimg",filePath:n.imagePostURL,name:"image",formData:{},success:function(e){t(e)}})}))},setpostUrlImg:function(){var e=this;return(0,i.default)(u.default.mark((function n(){var t,o;return u.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.uploadImg();case 2:t=n.sent,o=JSON.parse(t.data),e.imagePostURL=o.data[0],console.log(e.imagePostURL);case 6:case"end":return n.stop()}}),n)})))()},select:function(e){this.imagePostURL=e.tempFilePaths[0],this.setpostUrlImg()},submit:function(){var n=this;if(this.imagePostURL)this.model1.userInfo.icon=this.imagePostURL;else if(this.icon.includes("/images")){var t=this.icon.substring(this.icon.indexOf("/images"));this.model1.userInfo.icon=t}else{var o=this.icon.substring(this.icon.indexOf("/postimg"));this.model1.userInfo.icon=o}console.log(this.model1.userInfo.icon);var u=this.model1.userInfo,i=null;i="男"===u.gender?1:"女"===u.gender?0:-1,e.$u.http.post("/users/updateUserInfo",{nickname:u.nickname,gender:i,signature:u.signature,icon:u.icon,user_id:u.user_id}).then((function(t){console.log(t),n.getUserData(),n.$refs.uToast.show({type:"success",message:"修改成功",duration:800,complete:function(){console.log(111),e.reLaunch({url:"/pages/user/user"})}})})).catch((function(e){}))},sexSelect:function(e){this.model1.userInfo.gender=e.name},getUserData:function(){var n=this;e.$u.http.get("/users/getIDTargetUser",{params:{user_id:"".concat(this.userID)}}).then((function(e){console.log(e.data.data[0]),n.userData=e.data.data[0];var t=e.data.data[0];n.icon=t.icon[0];var o=n.model1.userInfo;o.user_id=t.user_id,o.username=t.user_name,o.nickname=t.nickname,o.signature=t.signature,1===t.gender?o.gender="男":0===t.gender?o.gender="女":o.gender="保密",o.icon=t.icon[0]})).catch((function(e){console.log(e)}))}},onLoad:function(e){this.userID=e.user_id,console.log(this.userID)},mounted:function(){this.getUserData()}};n.default=r}).call(this,t(2)["default"])},313:function(e,n,t){"use strict";t.r(n);var o=t(314),u=t.n(o);for(var i in o)["default"].indexOf(i)<0&&function(e){t.d(n,e,(function(){return o[e]}))}(i);n["default"]=u.a},314:function(e,n,t){}},[[307,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../../../.sourcemap/mp-weixin/pages/user/userFunc/userManage/userManage.js.map