(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/user"],{299:function(e,n,t){"use strict";(function(e,n){var o=t(4);t(26);o(t(25));var s=o(t(300));e.__webpack_require_UNI_MP_PLUGIN__=t,n(s.default)}).call(this,t(1)["default"],t(2)["createPage"])},300:function(e,n,t){"use strict";t.r(n);var o=t(301),s=t(303);for(var r in s)["default"].indexOf(r)<0&&function(e){t.d(n,e,(function(){return s[e]}))}(r);t(305);var u,i=t(32),c=Object(i["default"])(s["default"],o["render"],o["staticRenderFns"],!1,null,"80842834",null,!1,o["components"],u);c.options.__file="pages/user/user.vue",n["default"]=c.exports},301:function(e,n,t){"use strict";t.r(n);var o=t(302);t.d(n,"render",(function(){return o["render"]})),t.d(n,"staticRenderFns",(function(){return o["staticRenderFns"]})),t.d(n,"recyclableRender",(function(){return o["recyclableRender"]})),t.d(n,"components",(function(){return o["components"]}))},302:function(e,n,t){"use strict";var o;t.r(n),t.d(n,"render",(function(){return s})),t.d(n,"staticRenderFns",(function(){return u})),t.d(n,"recyclableRender",(function(){return r})),t.d(n,"components",(function(){return o}));try{o={userTopIcon:function(){return Promise.all([t.e("common/vendor"),t.e("components/userTopIcon/userTopIcon")]).then(t.bind(null,941))},uToast:function(){return t.e("uni_modules/uview-ui/components/u-toast/u-toast").then(t.bind(null,948))}}}catch(i){if(-1===i.message.indexOf("Cannot find module")||-1===i.message.indexOf(".vue"))throw i;console.error(i.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var s=function(){var e=this,n=e.$createElement;e._self._c},r=!1,u=[];s._withStripped=!0},303:function(e,n,t){"use strict";t.r(n);var o=t(304),s=t.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){t.d(n,e,(function(){return o[e]}))}(r);n["default"]=s.a},304:function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var t={data:function(){return{userNewsCollect:[{title:"帖子",num:20,color:"rgb(116, 185, 255)"},{title:"收藏",num:35,color:"rgb(0, 206, 201)"},{title:"关注",num:10,color:"rgb(250, 177, 160)"},{title:"粉丝",num:12,color:"rgb(225, 112, 85)"}],userFunc:[{title:"个人信息管理",icon:"/static/icon/edit.png"},{title:"查看浏览历史",icon:"/static/icon/history.png"},{title:"赞过的帖子",icon:"/static/icon/user_like.png"}],useInfo:{},isLogin:!1}},methods:{goToDetail:function(n){switch(n){case 0:e.navigateTo({url:"/pages/user/userFunc/userManage/userManage?user_id=".concat(this.useInfo.user_id)});break;case 1:e.navigateTo({url:"/pages/user/userFunc/visitHistory/visitHistory?user_id=".concat(this.useInfo.user_id)});break;case 2:e.navigateTo({url:"/pages/user/userFunc/userLikePost/userLikePost?user_id=".concat(this.useInfo.user_id)});break}},getNum:function(){var n=this;e.$u.http.post("/bbs/getPostNumByUserID",{user_id:"".concat(this.useInfo.user_id)}).then((function(e){n.userNewsCollect[0].num=e.data[0].post_num})).catch((function(e){console.log(e)})),e.$u.http.post("/bbs/getCollectNumByUserID",{user_id:"".concat(this.useInfo.user_id)}).then((function(e){n.userNewsCollect[1].num=e.data[0].collect_num})).catch((function(e){console.log(e)})),e.$u.http.post("/bbs/getFollowNumByUserID",{user_id:"".concat(this.useInfo.user_id)}).then((function(e){n.userNewsCollect[2].num=e.data[0].follow_num})).catch((function(e){console.log(e)})),e.$u.http.post("/bbs/getFansNumByUserID",{user_id:"".concat(this.useInfo.user_id)}).then((function(e){n.userNewsCollect[3].num=e.data[0].fans_num})).catch((function(e){console.log(e)}))},toDeatilPage:function(n){var t=e.getStorageSync("user_id");0===n?e.navigateTo({url:"/pages/user/userTags/userPosts/userPosts?user_id=".concat(t)}):1===n?e.navigateTo({url:"/pages/user/userTags/userCollect/userCollect?user_id=".concat(t)}):2===n?e.navigateTo({url:"/pages/user/userTags/userFollow/userFollow?user_id=".concat(t)}):e.navigateTo({url:"/pages/user/userTags/userFans/userFans?user_id=".concat(t)})},toLogin:function(){e.navigateTo({url:"/pages/user/login/login"})},getUserInfo:function(){var n=this,t=e.getStorageSync("user_token");t?e.$u.http.get("/users/verifyToken",{header:{Authorization:"Bearer ".concat(t)}}).then((function(t){var o=t.data,s=o.code,r=o.message;o.user;200==s?(n.isLogin=!0,n.useInfo=t.data.user.tokenData,n.getNum(),e.setStorageSync("user_id",n.useInfo.user_id)):(e.showToast({title:r,icon:"none"}),n.useInfo={icon:"/images/user_bg.jpg"},e.removeStorageSync("user_token"),e.removeStorageSync("user_id"),e.setStorageSync("isLogin",!1))})).catch((function(e){console.log(e)})):(e.removeStorageSync("user_token"),e.removeStorageSync("user_id"),e.setStorageSync("isLogin",!1),e.showToast({title:"请先登录",icon:"none"}),this.useInfo={icon:"/images/user_bg.jpg"})},logOut:function(){e.removeStorageSync("user_token"),e.removeStorageSync("user_id"),e.setStorageSync("isLogin",!1),this.$refs.uToast.show({message:"退出登录成功",type:"success",position:"center",duration:800,complete:function(){e.redirectTo({url:"/pages/user/login/login"})}})}},onShow:function(){this.getNum();var n=e.getStorageSync("isLogin");n||e.reLaunch({url:"/pages/user/login/login"})},mounted:function(){this.getUserInfo()}};n.default=t}).call(this,t(2)["default"])},305:function(e,n,t){"use strict";t.r(n);var o=t(306),s=t.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){t.d(n,e,(function(){return o[e]}))}(r);n["default"]=s.a},306:function(e,n,t){}},[[299,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/user/user.js.map